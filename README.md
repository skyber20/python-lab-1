# Калькулятор инфиксной формы записи

---

## Автор
**Тимошенко Артём Романович (М8О-102БВ-25)**

**Уровень:** Medium (M2)

---

## Описание
Консольный калькулятор для вычисления математических выражений со скобками и поддержкой операторов разного приоритета. Реализован с использованием шунтирующего алгоритма для преобразования в обратную польскую нотацию (RPN) и дальнейшего вычисления с помощью стека.

---

## Функционал

### Поддерживаемые операции:
- **Базовые:** `+`, `-`, `*`, `/`
- **Целочисленные:** `//` (деление), `%` (остаток)
- **Степень:** `**` (правоассоциативная)
- **Унарные знаки:** `~`,`$`

### Особенности:
- Работает только с инфиксным выражением
- Учитывает приоритеты: 1) ~ $; 2) **; 3) * / // %; 4) + -
- Поддержка целых и вещественных чисел
- Поддержка скобок
- // и % только для целых (3.0 - не целое)
- Обработка ошибок (деление на 0, допустимые знаки, некорректный ввод и тд)

---

## Структура проекта
```
calculator_laba/
├── src/                   # Исходный код приложения
│   ├── __init__.py
│   ├── main.py               # Главный исполняемый файл
│   ├── class_Stack.py        # Реализация структуры данных Стек
│   ├── constants.py          # Константы и настройки
│   ├── exp_calculate.py      # Вычисление выражений в RPN
│   ├── exp_to_RPN.py         # Преобразование в обратную польскую запись
│   ├── funcs_for_calc.py     # Вспомогательные функции для вычислений
│   ├── tokenization.py       # Токенизация входных выражений
│   └── validation_expression.py # Валидация математических выражений
├── tests/             # Модульные тесты
│   ├── __init__.py
│   ├── test_exp_calculate.py # Тесты вычисления выражений
│   ├── test_exp_to_RPN.py    # Тесты преобразования в RPN
│   └── test_tokenization.py  # Тесты токенизации
├── .pre-commit-config.yaml
├── pyproject.toml
├── README.md
├── requirements.txt
└── uv.lock
```
---

## Алгоритм:
- **Валидация выражения**

- **Токенизация входной строки**

- **Преобразование в RPN через шунтирующий алгоритм**

- **Вычисление результата с использованием стека**

---

## Примеры использования
### 1 пример (дефолт без скобок)
```
Введите арифметическое выражение: 2 ** 3 ** 2
После токенизации: [('2', 'NUMBER'), ('**', 'OPERATOR'), ('3', 'NUMBER'), ('**', 'OPERATOR'), ('2', 'NUMBER')]
После преобразования в RPN: ['2', '3', '2', '**', '**']
Результат: 512
```

### 2 пример (со скобками)
```
Введите арифметическое выражение: (-5 +3) * 2 ** 2
После токенизации: [('(', 'BRACKET'), ('〜', 'OPERATOR'), ('5', 'NUMBER'), ('+', 'OPERATOR'), ('3', 'NUMBER'), (')', 'BRACKET'), ('*', 'OPERATOR'), ('2', 'NUMBER'), ('**', 'OPERATOR'), ('2', 'NUMBER')]
После преобразования в RPN: ['5', '〜', '3', '+', '2', '2', '**', '*']
Результат: -8
```

### 3 пример (с ошибкой)
```
Введите арифметическое выражение: 2 + )
ValueError: Закрывающих скобок больше, чем открывающих
```

---

## Вывод:
Калькулятор корректно обрабатывает сложные математические выражения с учетом приоритетов операторов, скобок и унарных знаков, демонстрируя надежную работу алгоритма shunting yard и эффективное применение структур данных стека для вычислений.
